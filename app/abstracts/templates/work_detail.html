{% extends "base.html" %}

{% block content %}

<h1>{{ work.title }}</h1>

<div class="row">
  <div class="col-md-8">
    <div class="card-columns">
      {% for authorship in authorships.all %}
      {% include "authorship_card.html" with authorship=authorship %}
      {% endfor %}
    </div>

    <div class="card">
      <div class="card-header">Abstract</div>
      <div class="card-body">
          {% if work.full_text %}
            <p>{{ work.full_text }}</p>
          {% else %}
            <div class="alert alert-warning">No abstract available for this work.</div>
          {% endif %}
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <p><a href="{% url 'conference_detail' work.conference.pk %}">{{ work.conference.year }} - {{ work.conference.venue }}</a></p>
        {% if work.state == "su" %}
          <div class="alert alert-warning">This is a submitted version!
          {% if work.published_version %}
            <a href="{% url 'work_detail' work.published_version.pk%}">See {{ work.published_version.conference.year }} accepted version</a>
          {% endif %}
          </div>
        {% endif %}
        {% with num_versions=work.unpublished_versions.count%}
          {% if num_versions > 0 %}
            <div class="alert alert-info">
          See submitted version{{ num_versions | pluralize }}:
          {% for up in work.unpublished_versions.all %}
            <a class="badge badge-primary" href="{% url 'work_detail' up.pk %}">{{ up.conference.year }}</a>
          {% endfor %}
            </div>
          {% endif %}
        {% endwith %}
      </div>
    </div>

  <div class="card">
    <div class="card-header">Tags</div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Keywords:
          {% if work.keywords.all %}
            {% for keyword in work.keywords.all %}
              <span class="badge badge-info">{{ keyword.title }}</span>
            {% endfor %}
          {% else %}
          None
          {% endif %}
        </li>
        <li class="list-group-item">Language:
          {% if work.languages.all %}
            {% for language in work.languages.all %}
              <span class="badge badge-info">{{ language.title }}</span>
            {% endfor %}
          {% else %}
          None
          {% endif %}
        </li>
        <li class="list-group-item">Topics:
          {% if work.topics.all %}
            {% for topic in work.topics.all %}
              <span class="badge badge-info">{{ topic.title }}</span>
            {% endfor %}
          {% else %}
          None
          {% endif %}
        </li>
        <li class="list-group-item">Disciplines:
          {% if work.disciplines.all %}
            {% for discipline in work.disciplines.all %}
              <span class="badge badge-info">{{ discipline.title }}</span>
            {% endfor %}
          {% else %}
          None
          {% endif %}
        </li>
      </ul>
  </div>

  </div>
</div>



{% endblock %}
