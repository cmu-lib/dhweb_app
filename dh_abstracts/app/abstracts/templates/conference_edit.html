{% extends "conference_create.html" %}

{% load static %}
{% load crispy_forms_tags %}

{% block seriesforms %}
<h2>Conference Series</h2>
<input class="btn btn-primary btn-sm" type="button" value="Add to series" id="add_series">
{{ series_membership_form.management_form }}
<div id="membership_formset">
  {% for form in series_membership_form.forms %}
  <div class="row" id="series_{{ forloop.counter0 }}">
    <div class="col">
      {{ form.series | as_crispy_field }}
    </div>
    <div class="col">
      {{ form.number | as_crispy_field }}
      {{ form.DELETE | as_crispy_field }}
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}

{% block js %}
<script>
  var form_count = {{ series_membership_form.total_form_count }};

  $('#add_series').click(function () {
    form_count++;
    var form = '{{ series_membership_form.empty_form|crispy|escapejs }}'.replace(/__prefix__/g, form_count - 1);
    $('#membership_formset').append(form);
    $('#id_form-TOTAL_FORMS').val(form_count);
  });
</script>
{% endblock %}
